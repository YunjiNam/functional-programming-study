> 챕터 3

# 액션

: 외부 세계에 영향을 주거나 받는 것. 실행 시점과 횟수에 의존

- 함수로 구현
- 어떤 일을 하려는지 아는 것이 중요
- 순수하지 않은 함수, 부수 효과 함수
- 잘 사용하기 위한 방법
    - 가능한 액션을 적게 사용
    - 가능한 작게 만들기
    - 외부 세계와 상호작용하는 것을 제한하기
        - 내부에 계산과 데이터만 있고 가장 바깥쪽에 액션이 있는 구조가 이상적
    - 호출 시점에 의존하는 것을 제한하기

# 계산

: 입력으로 출력을 계산

- 함수로 구현
- 순수 함수, 수학 함수
- 액션보다 좋은 점
    - 테스트 용이
    - 기계적인 분석 쉬움
    - 조합하기 좋음 → 더 큰 계산 만들 수 있음

# 데이터

: 이벤트에 대한 사실 ← 언제나 쉽게 해석할 수 있도록 표현해야 함

- 장점
    - 직렬화
    - 동일성 비교
    - 자유로운 해석

최대한 액션에서 계산을 빼야하고, 계산에서 데이터를 분리할 수 있는지 생각해야함

`결정`과 `계획`은 계산이 될 가능성 높음

일반적인 구현 순서

1. 데이터
2. 계산
3. 액션

## 예제) 쿠폰독의 새로운 마케팅 전략

- 쿠폰에 관심 있는 구독자들에게 이메일로 쿠폰을 매주 보내주는 서비스
- 친구 10명 추천 → 더 좋은 쿠폰 보내주기
- 커다란 이메일 DB에서 이메일별로 각 사용자가 추천한 친구 수도 기록
- 쿠폰 정보 DB 있음
    - 등급 정보
        - `best` - 추천 많이 한 사용자
        - `good` - 모든 사용자
        - `bad` - 사용자 전달 X

### 데이터

- 구독자 목록(이메일 DB에서 가져오기)
- 쿠폰 목록(쿠폰 DB에서 가져오기)
- 보내야 할 이메일 목록

### 구독자 한 명에게 쿠폰을 보내는 흐름
1. 구독자 이메일 DB에서 가져오기 - 액션
2. 쿠폰 목록 가져오기 - 액션
3. 해당 구독자의 추천 친구 수가 10 이상이면 `best`, 아니면 `good` 쿠폰 결정 - 계산
4. 쿠폰 등급에 맞게 이메일 계획 - 계산
5. 이메일 전송 - 액션
