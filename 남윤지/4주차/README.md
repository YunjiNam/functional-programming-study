# Chapter 8 : 계층형 설계 1

> 소프트웨어 설계(software design) 는 코드를 만들고, 테스트하고, 유지하기 쉬운 프로그래밍 방법을 선택하기 위해 미적 감각을 사용하는 것을 말한다

```
> 계층형 설계 : 소프트웨어를 계층으로 구성하는 기술
```

> 계층형 설계 패턴은 4가지가 있다

1. 직접 구현
2. 추상화 벽
3. 작은 인터페이스
4. 편리한 계층

<br/>

> 호출 그래프를 만들어 함수를 시각화하기

- 계층이 많으면 호출 그래프를 통해 시스템 계층이 어떻게 구성되어 있는지 전체적으로 볼 수 있다
- 설계 감각을 키우는데 중요한 역할을 한다
- 다이어그램을 그리는 연습을 많이 하면 좋은 커뮤니케이션 도구가 될 수 있다. 설계에 대한 논의를 하다 보면 추상적인 이야기가 될 수 있는데, 다이어그램이 있다면 추상적인 대화가 아닌 구체적인 것을 보면서 논의할 수 있다.

```
> 함수 이름은 함수가 어느 곳에 위치할지 결정하기 위한 정보로 쓸 수 있다
```

> 같은 계층에 있는 함수는 같은 목적을 가져야 한다

- 다이어그램을 구성할 때 각 계층을 구분하는 목적을 정확히 구분해야 함수가 위치할 계층을 선택하는데 좋은 정보로 사용할 수 있다
- 계층의 목적은 각 계층에 있는 함수의 목적과 같다

<br/>

> 계층형 설계에서 계층 사이의 상호 관계나 특정 계층의 구현, 또는 특정 함수의 구현을 통해 문제를 찾을 수 있다. 이 세가지 특징들로 문제를 찾기 위해 알맞은 줌 레벨을 사용해 영역별로 볼 수 있다.

> 3단계 줌 레벨

1. 전역 줌 레벨
   - 전역 줌 레벨로 그래프 전체 중 필요한 부분을 살펴볼 수 있다
2. 계층 줌 레벨
   - 한 계층과 연결된 바로 아래 계층을 볼 수 있다
   - 계층 줌 레벨로 보면 함수가 가리키는 화살표를 계층 간에 비교할 수 있다
3. 함수 줄 레벨
   - 함수 하나와 바로 아래 연결된 함수들을 볼 수 있다
   - 함수 줌 레벨을 사용하면 함수 하나가 가진 화살표를 비교할 수 있다
     - 화살표를 같은 길이로 만드는 가장 일반적인 방법은 중간에 함수를 두는 것이다

```
> 설계에 대해 이야기할 때는 같은 용어를 사용하는 것이 중요하고 상황을 고려해서 평가해야 한다
```

<br/>

> 직접 구현 패턴 리뷰

- 직접 구현한 코드는 한 단걔의 구체화 수준에 관한 문제만 해결한다
- 걔층형 설계는 특정 구체화 단계에 집중할 수 있게 도와준다
- 호출 그래프는 구체화 단계에 대한 풍부한 단서를 보여준다
- 함수를 추출하면 더 일반적인 함수로 만들 수 있다
- 일반적인 함수가 많을수록 재사용하기 좋다
  - '중보 코드'를 찾기 위해 함수를 빼내는 것과는 다르다
  - 일반적인 함수는 구체적인 함수보다 더 많은 곳에서 쓸 수 있다
- 복잡성을 감추지 않는당
